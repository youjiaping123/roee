# LED控制程序

这个程序使用51单片机控制8个LED灯,实现以下功能:

1. 上电初始化后8个灯全亮
2. 当按下K1按键后,8个LED开始闪烁,周期为1秒

## 开发环境

- 使用51单片机开发环境(如Keil C51)
- 确保开发环境中包含 `reg51.h` 头文件

## 实现过程

1. 初始化设置:
   - 配置定时器1,工作方式1,12MHz晶振
   - 设置P2口为输出模式

2. 主程序:
   - 初始化后点亮所有LED
   - 循环检测K1按键状态

3. 定时器中断服务程序:
   - 当K1被按下后,每0.5秒翻转一次LED状态

## 程序框架

- `main.c`: 主程序文件
- `led.h`: LED相关函数声明
- `led.c`: LED相关函数实现
- `timer.h`: 定时器相关函数声明
- `timer.c`: 定时器相关函数实现

## 硬件连接

- LED连接到P2口
- K1按键连接到P3.2口

## 使用说明

1. 确保开发环境正确配置,包含所有必要的头文件
2. 将程序编译并下载到51单片机
3. 上电后,所有LED会点亮
4. 按下K1按键,LED开始以1秒周期闪烁

## 常见问题

如果遇到 `reg51.h` 文件缺失的错误,请检查以下几点:

1. 确保您的开发环境正确安装和配置
2. 检查项目设置中的包含路径是否正确
3. 如果仍然无法解决,可以创建一个简化版的 `reg51.h` 文件,仅包含程序中使用的定义

## 注意事项

- 本程序假设使用12MHz晶振,如果使用不同频率的晶振,需要调整定时器的初始值
- 确保硬件连接正确,特别是LED和按键的连接

## 编译和仿真说明

1. 使用 Keil uVision 或其他 8051 C 编译器创建项目并添加所有源文件。
2. 确保正确设置包含路径，解决 `reg51.h` 的问题。
3. 编译项目生成 HEX 文件。
4. 在 ISIS 7 Professional 中添加 8051 微控制器，并加载生成的 HEX 文件。
5. 在 ISIS 中正确连接 LED 和按键，设置时钟频率为 12MHz。
6. 运行仿真以测试程序功能。

注意：如果使用不同的编译器或仿真软件，具体步骤可能略有不同。请参考相应软件的使用说明。
